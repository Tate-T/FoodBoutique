var e=globalThis,t={},o={},n=e.parcelRequire46ec;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var d={id:e,exports:{}};return t[e]=d,n.call(d.exports,d,d.exports),d.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},e.parcelRequire46ec=n),(0,n.register)("1qv28",function(e,t){async function o(e){try{let t=await fetch("https://food-boutique.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(400===t.status){document.getElementById("footer-modal-content").classList.remove("footer-modal-content-modi-height"),document.getElementById("footer-modal-center-div").classList.remove("footer-modal-center-div-modi-margin"),document.getElementById("footer-modal-content").classList.add("footer-modal-content-height"),document.getElementById("footer-modal-center-div").classList.add("footer-modal-center-div-margin"),document.getElementById("footer-modal-image").style.display="none",document.getElementById("footer-modal-title").innerHTML='Service  <span style="color:#6D8434;">not found</span> (400)',document.getElementById("footer-modal-text").textContent="Check your email address and try again.";return}let o=await t.json();!1===o.success&&o.message&&o.message.includes("already exists")?(document.getElementById("footer-modal-content").classList.remove("footer-modal-content-height"),document.getElementById("footer-modal-center-div").classList.remove("footer-modal-center-div-height"),document.getElementById("footer-modal-center-div").classList.remove("footer-modal-center-div-margin"),document.getElementById("footer-modal-content").classList.add("footer-modal-content-modi-height"),document.getElementById("footer-modal-center-div").classList.add("footer-modal-center-div-modi-height"),document.getElementById("footer-modal-center-div").classList.add("footer-modal-center-div-modi-margin"),document.getElementById("footer-modal-image").style.display="none",document.getElementById("footer-modal-title").innerHTML='This <span style="color:#6D8434;">email address</span> has already been entered',document.getElementById("footer-modal-text").textContent="You have already subscribed to our new products. Watch for offers at the mailing address."):(document.getElementById("footer-modal-content").classList.remove("footer-modal-content-modi-height"),document.getElementById("footer-modal-center-div").classList.remove("footer-modal-center-div-modi-height"),document.getElementById("footer-modal-center-div").classList.remove("footer-modal-center-div-modi-margin"),document.getElementById("footer-modal-content").classList.add("footer-modal-content-height"),document.getElementById("footer-modal-center-div").classList.add("footer-modal-center-div-height"),document.getElementById("footer-modal-center-div").classList.add("footer-modal-center-div-margin"),document.getElementById("footer-modal-image").style.display="block",document.getElementById("footer-modal-title").innerHTML='Thanks for subscribing for <span style="color:#6D8434;">new</span> products',document.getElementById("footer-modal-text").textContent="We promise you organic and high-quality products that will meet your expectations. Please stay with us and we promise you many pleasant surprises.",document.getElementById("footer-modal-center-div").style.marginTop="100px")}catch(e){document.getElementById("footer-modal-title").textContent="Network error",document.getElementById("footer-modal-text").textContent="Please check your connection and try again.",console.error("API ERROR",e)}}window.greetFooterSubscribe=function(){let e=document.getElementById("footer-input");o(e?e.value.trim():""),openFooterModal()},window.closeFooterModal=function(){document.getElementById("footer-modal").style.display="none"},window.openFooterModal=function(){document.getElementById("footer-modal").style.display="flex"}}),document.querySelector(".basket__list");const d=JSON.parse(localStorage.getItem("products"))??[],r=document.querySelector(".basket__list");async function a(){for(let e of d){let t=await fetch(`https://food-boutique.b.goit.study/api/products/${e}`),o=await t.json(),n=document.createElement("li");n.className="basket__product",n.dataset.price=o.price,n.dataset.id=o._id,n.innerHTML=`
      <div class="basket__product--square">
      <img src="${o.img}" alt="${o.name}" class="basket__product--image">
      </div>
      <div class="basket__product--content">
        <h4 class="basket__product--title">${o.name}</h4>
        <div class="basket__product--wrap">
          <p class="basket__product--text">Category: <span class="basket__product--bold">${o.category}</span></p>
          <p class="basket__product--text">Size: <span class="basket__product--bold">${o.size}</span></p>
        </div>
        <p class="basket__product--price">$${o.price}</p>
      </div>
      <button class="basket__product--close">
        <svg class="basket__product--icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
          <path d="M25 9.093l-2.093-2.093-6.907 6.907-6.907-6.907-2.093 2.093 6.907 6.907-6.907 6.907 2.093 2.093 6.907-6.907 6.907 6.907 2.093-2.093-6.907-6.907 6.907-6.907z"></path>
        </svg>
      </button>
      <div class="basket__product--controls">
        <button class="basket__product--btn basket__product--subtract">
          <div class="basket__product--minus"></div>
        </button>
        <p class="basket__product--number">1</p>
        <button class="basket__product--btn basket__product--add">
          <div class="basket__product--plus"></div>
          <div class="basket__product--plus"></div>
        </button>
      </div>
    `,r.appendChild(n),document.querySelector(".basket__number").textContent=`${(parseFloat(document.querySelector(".basket__number").textContent.replace(",","."))+o.price).toFixed(2)}`.replace(".",",")}}document.querySelector(".basket__title").textContent=`Cart (${d.length})`,0===d.length?document.querySelector(".basket__wraper").innerHTML='<img src="./images/desktop/hero__bg.jpg" alt="">':a();let s=null;function c(e,t){let o="add"===t?e.previousElementSibling:e.nextElementSibling,n=Number(o.textContent)+("add"===t?1:-1);if(n<0)return;o.textContent=n;let d=parseFloat(e.closest(".basket__product").dataset.price),r=document.querySelector(".basket__number"),a=parseFloat(r.textContent.replace(",","."));"add"===t?a+=d:a-=d,r.textContent=a.toFixed(2).replace(".",",")}function l(e,t){c(e,t),s=setInterval(()=>{c(e,t)},150)}function i(){clearInterval(s)}r.addEventListener("mousedown",e=>{e.target.closest(".basket__product--add")?l(e.target.closest(".basket__product--add"),"add"):e.target.closest(".basket__product--subtract")&&l(e.target.closest(".basket__product--subtract"),"subtract")}),document.addEventListener("mouseup",i),r.addEventListener("mouseleave",i),r&&r.addEventListener("click",e=>{let t=e.target.closest(".basket__product--close");if(t){let e=t.closest(".basket__product"),o=e.dataset.id,n=parseInt(e.querySelector(".basket__product--number").textContent)||1;e.remove();let d=JSON.parse(localStorage.getItem("products"))??[];d=d.filter(e=>e!==o),localStorage.setItem("products",JSON.stringify(d));let r=parseFloat(e.dataset.price),a=document.querySelector(".basket__number"),s=parseFloat(a.textContent.replace(",","."));(s-=r*n)<0&&(s=0),a.textContent=s.toFixed(2).replace(".",",")}});const m=document.querySelector(".basket__btn"),u=document.querySelector(".basket__number");m.addEventListener("click",()=>{localStorage.removeItem("products"),r.innerHTML="",u.textContent="0,00"}),document.querySelector(".basket__input"),document.querySelector(".basket__form").addEventListener("submit",async e=>{e.preventDefault(),document.querySelector(".order__backdrop").classList.remove("order__hidden")}),document.querySelector(".order__close").addEventListener("click",e=>{e.preventDefault(),document.querySelector(".order__backdrop").classList.add("order__hidden")}),n("1qv28");
//# sourceMappingURL=cart.d8c5b299.js.map
